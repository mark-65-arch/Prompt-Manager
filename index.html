<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1 class="app-title">AI Prompt Manager</h1>
            <button class="theme-toggle-btn" id="themeToggleBtn" title="Toggle dark/light theme" aria-label="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-header">
                    <h2 class="sidebar-title">Categories</h2>
                    <div class="category-actions">
                        <button class="add-category-btn" id="addCategoryBtn" title="Add Category">
                            <span class="icon">+</span>
                        </button>
                    </div>
                </div>
                <div class="category-tree" id="categoryTree">
                    <!-- Categories will be dynamically generated here -->
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="content-header">
                <h2 class="content-title">All Prompts</h2>
                <div class="header-actions">
                    <button class="bulk-select-toggle-btn" id="bulkSelectToggleBtn" title="Bulk Operations">
                        ‚òëÔ∏è Select
                    </button>
                    <button class="data-management-btn" id="dataManagementBtn" title="Data Management">
                        üìä Data
                    </button>
                    <button class="add-prompt-btn">+ Add New Prompt</button>
                </div>
            </div>
            
            <div class="search-filter-section">
                <div class="search-bar">
                    <input type="text" placeholder="Search prompts by title, content, or tags..." class="search-input" id="searchInput">
                    <button class="search-btn">Search</button>
                </div>

                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="aiModelFilter">AI Model</label>
                        <select id="aiModelFilter" class="filter-select">
                            <option value="">All Models</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="categoryFilter">Category</label>
                        <select id="categoryFilter" class="filter-select">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="starRatingFilter">Star Rating</label>
                        <select id="starRatingFilter" class="filter-select">
                            <option value="">All Ratings</option>
                            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 stars)</option>
                            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4+ stars)</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê (3+ stars)</option>
                            <option value="2">‚≠ê‚≠ê (2+ stars)</option>
                            <option value="1">‚≠ê (1+ stars)</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="dateRangeFilter">Date Range</label>
                        <select id="dateRangeFilter" class="filter-select">
                            <option value="">All Time</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>
                    
                    <button id="clearFiltersBtn" class="clear-filters-btn">Clear All Filters</button>
                </div>

                <div class="tag-cloud-section">
                    <h3 class="tag-cloud-title">Popular Tags</h3>
                    <div class="tag-cloud" id="tagCloud">
                        <!-- Tags will be dynamically populated here -->
                    </div>
                </div>

                <div class="active-filters-section" id="activeFiltersSection" style="display: none;">
                    <h4 class="active-filters-title">Active Filters:</h4>
                    <div class="active-filters" id="activeFilters">
                        <!-- Active filter chips will be dynamically populated here -->
                    </div>
                </div>

                <div class="results-info">
                    <span class="results-count" id="resultsCount">0 prompts</span>
                </div>
            </div>

            <div class="prompts-grid">
                <!-- Prompts will be dynamically populated here -->
            </div>
        </main>

        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobileOverlay"></div>
    </div>

    <!-- Category Management Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Add Category</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="categoryForm">
                    <div class="form-group">
                        <label for="categoryName">Category Name</label>
                        <input type="text" id="categoryName" class="form-input" required>
                    </div>
                    <div class="form-group" id="parentCategoryGroup" style="display: none;">
                        <label for="parentCategory">Parent Category</label>
                        <select id="parentCategory" class="form-select">
                            <option value="">Select parent category...</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
                        <button type="submit" class="btn-primary" id="submitBtn">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Delete</h3>
                <button class="modal-close" id="confirmModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure you want to delete this category?</p>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="confirmCancelBtn">Cancel</button>
                    <button type="button" class="btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Management Modal -->
    <div class="modal" id="promptModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title" id="promptModalTitle">Add New Prompt</h3>
                <button class="modal-close" id="promptModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="promptForm">
                    <div class="form-group">
                        <label for="promptTitle">Title</label>
                        <input type="text" id="promptTitle" class="form-input" required placeholder="Enter prompt title">
                    </div>
                    
                    <div class="form-group">
                        <label for="promptContent">Prompt Content</label>
                        <textarea id="promptContent" class="form-textarea" required placeholder="Enter your prompt content here..." rows="8"></textarea>
                    </div>
                    
                    <!-- Template Settings -->
                    <div class="form-group">
                        <div class="template-settings">
                            <label class="checkbox-label">
                                <input type="checkbox" id="isTemplate" class="form-checkbox">
                                <span class="checkbox-text">This is a template with placeholder variables</span>
                            </label>
                        </div>
                        
                        <div class="template-helper" id="templateHelper" style="display: none;">
                            <div class="template-info">
                                <h4 class="template-title">üìù Template Variables</h4>
                                <p class="template-description">Use placeholder variables in your prompt content using the format [VARIABLE_NAME]. Common variables:</p>
                                <div class="template-variables">
                                    <span class="variable-tag" data-var="[TOPIC]">[TOPIC]</span>
                                    <span class="variable-tag" data-var="[AUDIENCE]">[AUDIENCE]</span>
                                    <span class="variable-tag" data-var="[STYLE]">[STYLE]</span>
                                    <span class="variable-tag" data-var="[FORMAT]">[FORMAT]</span>
                                    <span class="variable-tag" data-var="[GOAL]">[GOAL]</span>
                                    <span class="variable-tag" data-var="[CONTEXT]">[CONTEXT]</span>
                                    <span class="variable-tag" data-var="[LENGTH]">[LENGTH]</span>
                                    <span class="variable-tag" data-var="[TONE]">[TONE]</span>
                                </div>
                                <small class="template-note">Click on any variable to add it to your prompt content.</small>
                                <div class="detected-variables" id="detectedVariables" style="display: none;">
                                    <strong>Variables found in your content:</strong>
                                    <div class="detected-vars-list" id="detectedVarsList"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="promptCategory">Category</label>
                            <select id="promptCategory" class="form-select" required>
                                <option value="">Select category...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="promptSubcategory">Subcategory</label>
                            <select id="promptSubcategory" class="form-select">
                                <option value="">Select subcategory...</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="promptAiModel">AI Model</label>
                            <select id="promptAiModel" class="form-select" required>
                                <option value="">Select AI model...</option>
                                <option value="ChatGPT">ChatGPT (OpenAI)</option>
                                <option value="Claude">Claude (Anthropic)</option>
                                <option value="Gemini">Gemini (Google)</option>
                                <option value="Llama">Llama (Meta)</option>
                                <option value="Mistral">Mistral AI</option>
                                <option value="Perplexity">Perplexity</option>
                                <option value="Cohere">Cohere</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="promptStarRating">Star Rating</label>
                            <select id="promptStarRating" class="form-select">
                                <option value="0">No rating</option>
                                <option value="1">‚≠ê (1 star)</option>
                                <option value="2">‚≠ê‚≠ê (2 stars)</option>
                                <option value="3">‚≠ê‚≠ê‚≠ê (3 stars)</option>
                                <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4 stars)</option>
                                <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 stars)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="promptTags">Tags</label>
                        <input type="text" id="promptTags" class="form-input" placeholder="Enter tags separated by commas (e.g., writing, creative, blog)">
                        <small class="form-help">Separate multiple tags with commas</small>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="promptCancelBtn">Cancel</button>
                        <button type="submit" class="btn-primary" id="promptSubmitBtn">Save Prompt</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Usage Log Modal -->
    <div class="modal" id="usageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="usageModalTitle">Log Usage</h3>
                <button class="modal-close" id="usageModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="usageForm">
                    <div class="form-group">
                        <label for="useCase">Use Case</label>
                        <input type="text" id="useCase" class="form-input" required placeholder="What did you use this prompt for?">
                    </div>
                    
                    <div class="form-group">
                        <label for="outcomeNotes">Outcome Notes</label>
                        <textarea id="outcomeNotes" class="form-textarea" rows="4" placeholder="How did it work? What were the results?"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="effectivenessRating">Effectiveness Rating</label>
                        <div class="effectiveness-rating">
                            <div class="star-rating" id="effectivenessStars">
                                <span class="star" data-rating="1">‚≠ê</span>
                                <span class="star" data-rating="2">‚≠ê</span>
                                <span class="star" data-rating="3">‚≠ê</span>
                                <span class="star" data-rating="4">‚≠ê</span>
                                <span class="star" data-rating="5">‚≠ê</span>
                            </div>
                            <span class="rating-text" id="effectivenessRatingText">No rating</span>
                        </div>
                        <input type="hidden" id="effectivenessRating" value="0">
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="usageCancelBtn">Cancel</button>
                        <button type="submit" class="btn-primary" id="usageSubmitBtn">Log Usage</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Version History Modal -->
    <div class="modal" id="versionHistoryModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title" id="versionHistoryModalTitle">Version History</h3>
                <button class="modal-close" id="versionHistoryModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="version-history-content">
                    <div class="version-actions">
                        <button class="btn-secondary" id="compareVersionsBtn" disabled>Compare Selected</button>
                        <button class="btn-primary" id="restoreVersionBtn" disabled>Restore Selected</button>
                    </div>
                    <div class="version-list" id="versionList">
                        <!-- Version history items will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Version Comparison Modal -->
    <div class="modal" id="versionComparisonModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title">Version Comparison</h3>
                <button class="modal-close" id="versionComparisonModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="version-comparison-content">
                    <div class="comparison-header">
                        <div class="version-info">
                            <h4 id="version1Title">Version A</h4>
                            <span id="version1Date" class="version-date"></span>
                        </div>
                        <div class="version-info">
                            <h4 id="version2Title">Version B</h4>
                            <span id="version2Date" class="version-date"></span>
                        </div>
                    </div>
                    <div class="comparison-grid">
                        <div class="version-content">
                            <div class="field-comparison">
                                <label>Title:</label>
                                <div class="field-value" id="version1TitleField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Content:</label>
                                <div class="field-value" id="version1ContentField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Category:</label>
                                <div class="field-value" id="version1CategoryField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>AI Model:</label>
                                <div class="field-value" id="version1ModelField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Tags:</label>
                                <div class="field-value" id="version1TagsField"></div>
                            </div>
                        </div>
                        <div class="version-content">
                            <div class="field-comparison">
                                <label>Title:</label>
                                <div class="field-value" id="version2TitleField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Content:</label>
                                <div class="field-value" id="version2ContentField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Category:</label>
                                <div class="field-value" id="version2CategoryField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>AI Model:</label>
                                <div class="field-value" id="version2ModelField"></div>
                            </div>
                            <div class="field-comparison">
                                <label>Tags:</label>
                                <div class="field-value" id="version2TagsField"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Data Management Modal -->
    <div class="modal" id="dataManagementModal">
        <div class="modal-content extra-large">
            <div class="modal-header">
                <h3 class="modal-title">Data Management & Statistics</h3>
                <button class="modal-close" id="dataManagementModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="statistics">üìä Statistics</button>
                    <button class="tab-btn" data-tab="export">üì§ Export</button>
                    <button class="tab-btn" data-tab="import">üì• Import</button>
                </div>

                <!-- Statistics Tab -->
                <div class="tab-content active" id="statisticsTab">
                    <div class="stats-dashboard">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h4 class="stat-title">Prompts</h4>
                                <div class="stat-value" id="totalPrompts">0</div>
                                <div class="stat-details">
                                    <span>This week: <span id="promptsThisWeek">0</span></span>
                                    <span>This month: <span id="promptsThisMonth">0</span></span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <h4 class="stat-title">Categories</h4>
                                <div class="stat-value" id="totalCategories">0</div>
                                <div class="stat-details">
                                    <span>Subcategories: <span id="totalSubcategories">0</span></span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <h4 class="stat-title">Average Rating</h4>
                                <div class="stat-value" id="avgRating">0</div>
                                <div class="stat-details">
                                    <span>‚≠ê stars</span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <h4 class="stat-title">Usage</h4>
                                <div class="stat-value" id="totalUsages">0</div>
                                <div class="stat-details">
                                    <span>Avg per prompt: <span id="avgUsagePerPrompt">0</span></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-charts">
                            <div class="chart-section">
                                <h4 class="chart-title">AI Model Distribution</h4>
                                <div class="model-distribution" id="modelDistribution">
                                    <!-- Model stats will be populated here -->
                                </div>
                            </div>
                            
                            <div class="chart-section">
                                <h4 class="chart-title">Top Tags</h4>
                                <div class="top-tags" id="topTags">
                                    <!-- Top tags will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export Tab -->
                <div class="tab-content" id="exportTab">
                    <div class="export-section">
                        <div class="export-info">
                            <h4>üì§ Export Your Data</h4>
                            <p>Download all your prompts, categories, and usage history as a JSON file. The filename will include a timestamp for easy identification.</p>
                            
                            <div class="export-features">
                                <h5>What's included:</h5>
                                <ul>
                                    <li>‚úÖ All prompts with content and metadata</li>
                                    <li>‚úÖ Categories and subcategories</li>
                                    <li>‚úÖ Usage history and version tracking</li>
                                    <li>‚úÖ Ratings and tags</li>
                                    <li>‚úÖ Creation and modification dates</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="export-actions">
                            <button class="btn-primary export-btn" id="exportDataBtn">
                                üìÅ Export Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Import Tab -->
                <div class="tab-content" id="importTab">
                    <div class="import-section">
                        <div class="import-info">
                            <h4>üì• Import Data</h4>
                            <p>Import prompts and categories from a previously exported JSON file or compatible format.</p>
                            
                            <div class="import-modes">
                                <h5>Import Mode:</h5>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="importMode" value="merge" checked>
                                        <span class="radio-label">
                                            <strong>Merge:</strong> Add new data, keep duplicates with "(Imported)" suffix
                                        </span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="importMode" value="replace">
                                        <span class="radio-label">
                                            <strong>Replace:</strong> Overwrite existing data with matching IDs
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="import-actions">
                            <input type="file" id="importFileInput" accept=".json" style="display: none;">
                            <button class="btn-primary import-btn" id="importDataBtn">
                                üìÇ Select File to Import
                            </button>
                        </div>
                        
                        <div class="import-warnings">
                            <h5>‚ö†Ô∏è Important Notes:</h5>
                            <ul>
                                <li>Only import files you trust</li>
                                <li>Create a backup export before importing</li>
                                <li>Invalid data will be rejected with error messages</li>
                                <li>Import progress will be shown with detailed results</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <script src="script.js"></script>
</body>
</html>